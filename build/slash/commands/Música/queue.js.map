{"version":3,"file":"queue.js","sourceRoot":"","sources":["../../../../src/slash/commands/MÃºsica/queue.ts"],"names":[],"mappings":"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","sourcesContent":["import { ChatInputCommandInteraction } from 'discord.js'\nimport EmbedBuilder from '#structures/EmbedBuilder.js'\nimport Translator, { keys } from '#utils/Translator.js'\nimport formatTime from '#utils/formatTime.js'\nimport Command from '#structures/Command.js'\nimport Client from '#structures/Client.js'\nimport logger from '#utils/logger.js'\n\nexport default class Queue extends Command {\n    constructor () {\n        super({\n            name: 'queue',\n            description: 'Show the queue!',\n            cooldown: 5,\n            dm_permission: false,\n        })\n    }\n\n    override async run (interaction: ChatInputCommandInteraction<'cached'>) {\n        const client = interaction.client as Client\n        const translate = Translator(interaction)\n        const player = client.music.players.get(interaction.guild.id)\n        if (!player)\n            return await interaction.reply({\n                embeds: [\n                    new EmbedBuilder()\n                        .setColor(client.settings.color)\n                        .setFooter({\n                            text: translate(keys.queue.no_queue),\n                            iconURL: interaction.user.displayAvatarURL(),\n                        }),\n                ],\n                ephemeral: true,\n            }).catch(logger.error)\n\n        if (!player.queue.current)\n            return await interaction.reply({\n                embeds: [\n                    new EmbedBuilder()\n                        .setColor(client.settings.color)\n                        .setFooter({\n                            text: translate(keys.queue.no_queue),\n                            iconURL: interaction.user.displayAvatarURL(),\n                        }),\n                ],\n                ephemeral: true,\n            })\n\n        const { title } = player.queue.current\n        const { queue } = player\n\n        player.queue.retrieve(1)\n\n        if (!player.queue[0] && player.queue.current)\n            return await interaction.reply({\n                embeds: [\n                    new EmbedBuilder()\n                        .setTitle(translate(keys.queue.no_queue))\n                        .setDescription(\n                            `ðŸŽ§ ${translate(keys.queue.current)}\\n[${title}](https://www.music.youtube.com/watch?v=${\n                                player.queue.current.id\n                            }) [<@${player.queue.current.requester.id}> - ${formatTime(\n                                Math.trunc(player.queue.current.duration ?? 0),\n                                false,\n                            )} - ${player.queue.current.streams?.[0].bitrate.toString().slice(0, 3)}Kbps]`,\n                        )\n                        .setAuthor({\n                            name: translate(keys.queue.queue, {\n                                name: player.queue.current?.author ?? 'Unknown',\n                            }),\n                            iconURL: 'https://i.imgur.com/CCqeomm.gif',\n                        })\n                        .setColor(client.settings.color),\n                ],\n            })\n                .catch(logger.error)\n\n        const x = 10\n        let i = -1\n        let j = 0\n\n        const queuelist = player.queue\n            .slice(x - 10, x)\n            .map(\n                () =>\n                    `**${++j}.** [${queue[++i].title}](https://www.music.youtube.com/watch?v=${queue[i].id}) [<@${\n                        queue[i].requester.id\n                    }> - ${formatTime(Math.trunc(queue[i].duration ?? 0), false)} - ${queue[i].streams?.[0].bitrate\n                        .toString()\n                        .slice(0, 3)}Kbps]`,\n            )\n            .join('\\n')\n\n        if (!queuelist)\n            return await interaction.reply({\n                embeds: [\n                    new EmbedBuilder()\n                        .setColor(client.settings.color)\n                        .setFooter({\n                            text: translate(keys.queue.no_page),\n                            iconURL: interaction.user.displayAvatarURL(),\n                        }),\n                ],\n            })\n                .catch(logger.error)\n\n        return await interaction.reply({\n            embeds: [\n                new EmbedBuilder()\n                    .setDescription(\n                        `ðŸŽ§ ${translate(keys.queue.current)}\\n [${title}](https://www.music.youtube.com/watch?v=${\n                            player.queue.current.id\n                        }) [<@${player.queue.current.requester.id}> - ${formatTime(\n                            Math.trunc(player.queue.current.duration ?? 0),\n                            false,\n                        )} - ${player.queue.current.streams?.[0].bitrate.toString().slice(0, 3)}Kbps]\\n__${\n                            translate(keys.NEXT)\n                        }__:\\n${queuelist}`,\n                    )\n                    .setThumbnail(client.user.displayAvatarURL())\n                    .setAuthor({\n                        name: `${translate(keys.queue.queue, {\n                            name: interaction.user.username,\n                        })} (${Math.floor(x / 10)} / ${Math.floor((player.queue.slice(1).length + 10) / 10)})`,\n                        iconURL: 'https://i.imgur.com/CCqeomm.gif',\n                    })\n                    .setFooter({\n                        text: `${translate(keys.queue.total)} ${player.queue.length}`,\n                        iconURL: interaction.user.displayAvatarURL(),\n                    })\n                    .setColor(client.settings.color),\n            ],\n        })\n            .catch(logger.error)\n    }\n}\n"]}