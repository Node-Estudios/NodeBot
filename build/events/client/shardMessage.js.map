{"version":3,"file":"shardMessage.js","sourceRoot":"","sources":["../../../src/events/client/shardMessage.ts"],"names":[],"mappings":"AAEA,OAAO,MAAM,MAAM,kBAAkB,CAAA;AAErC,MAAM,CAAC,OAAO,CAAC,KAAK,WAChB,WAAoB,EACpB,OAKC,EACD,OAAoB;IAEpB,IAAI,CAAC,WAAW,IAAI,CAAC,OAAO;QAAE,OAAM;IAEpC,IAAI,OAAO,CAAC,IAAI,KAAK,QAAQ,EAAE;QAC3B,IAAI,OAAO,CAAC,KAAK,KAAK,KAAK,EAAE;YACzB,MAAM,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAA;YAC9C,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC;gBACrB,WAAW,EAAE,gBAAgB;gBAC7B,WAAW,EAAE,MAAM;gBACnB,iBAAiB,EAAE,EAAE;aACxB,CAAC,CAAA;SACL;aAAM;YACH,MAAM,CAAC,IAAI,CAAC,qBAAqB,OAAO,CAAC,KAAK,EAAE,CAAC,CAAA;YACjD,OAAO,CAAC,SAAS,EAAE,KAAK,CAAC;gBACrB,WAAW,EAAE,gBAAgB;gBAC7B,WAAW,EAAE,MAAM;gBACnB,iBAAiB,EAAE,OAAO,CAAC,KAAK;aACnC,CAAC,CAAA;SACL;KACJ;AACL,CAAC","sourcesContent":["import { Cluster } from 'discord-hybrid-sharding'\nimport NodeManager from '#structures/NodeManager.js'\nimport logger from '#utils/logger.js'\n\nexport default async function (\n    originShard: Cluster,\n    message: {\n        data: any\n        type: 'reboot'\n        shard: 'all' | number\n        value: any\n    },\n    manager: NodeManager,\n) {\n    if (!originShard || !message) return\n\n    if (message.type === 'reboot') {\n        if (message.shard === 'all') {\n            logger.warn('Reiniciando todas las shards...')\n            manager.recluster?.start({\n                restartMode: 'gracefulSwitch',\n                totalShards: 'auto',\n                shardsPerClusters: 10,\n            })\n        } else {\n            logger.warn(`Reiniciando Shard ${message.shard}`)\n            manager.recluster?.start({\n                restartMode: 'gracefulSwitch',\n                totalShards: 'auto',\n                shardsPerClusters: message.shard,\n            })\n        }\n    }\n}\n"]}