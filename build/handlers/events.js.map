{"version":3,"file":"events.js","sourceRoot":"","sources":["../../src/handlers/events.ts"],"names":[],"mappings":"AAEA,OAAO,MAAM,MAAM,kBAAkB,CAAA;AAKrC,MAAM,OAAO,YAAY;IACS;IAA9B,YAA8B,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;IAAI,CAAC;IACjD,IAAI,CAAE,MAAa;QACf,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE;YACjC,MAAM,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAA;YACnE,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,EAAE;gBACnC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YACrB,CAAC,CAAC,CAAA;YACF,OAAM;SACT;QACD,KAAK,MAAM,CAAC,SAAS,EAAE,UAAU,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC1D,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAEzC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,GAAG,IAAI,EAAE,EAAE;gBAIxC,MAAM,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAC,CAAA;YAC3D,CAAC,CAAC,CAAA;SACL;IACL,CAAC;CACJ","sourcesContent":["import Client from '#structures/Client.js'\nimport { BaseEvent } from '../structures/Events.js'\nimport logger from '#utils/logger.js'\nexport interface Event {\n    [eventName: string]: new (client: Client) => BaseEvent\n}\n\nexport class EventHandler {\n    constructor (private readonly client: Client) { }\n    load (events: Event): void {\n        if (this.client.cluster.maintenance) {\n            logger.debug('Maintenance mode is enabled, skipping event loading')\n            this.client.cluster.once('ready', () => {\n                this.load(events)\n            })\n            return\n        }\n        for (const [eventName, EventClass] of Object.entries(events)) {\n            const event = new EventClass(this.client)\n            // console.log(`Loading event: ${eventName}.js`);\n            this.client.on(eventName, async (...args) => {\n                // console.log(`Event ${eventName} loaded`);\n                // console.log(...args)\n                // Pasar una función anónima como primer argumento y la tupla de argumentos como argumentos de esta función\n                await event._run(() => event.run(this.client, ...args))\n            })\n        }\n    }\n}\n"]}